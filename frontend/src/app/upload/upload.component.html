<div class="upload-container">
  <div class="upload-section">
    <label for="file-input" class="upload-label">
      Choose Audio File (MP3, WAV, M4A, FLAC, OGG)
    </label>
    <input 
      id="file-input"
      type="file" 
      accept="audio/*,.mp3,.wav,.m4a,.flac,.ogg" 
      (change)="onFileSelected($event)" 
      [disabled]="uploading"
      #fileInput />
  </div>

  <div class="error-message" *ngIf="errorMessage">
    <p>‚ùå {{ errorMessage }}</p>
  </div>

  <div class="file-info" *ngIf="selectedFile && !errorMessage">
    <p>‚úÖ Selected: {{ selectedFile.name }} ({{ formatFileSize(selectedFile.size) }})</p>
  </div>

  <div class="upload-status" *ngIf="uploading">
    <p>üì§ Uploading file...</p>
  </div>

  <div class="progress-section" *ngIf="taskId && !uploading">
    <p>üéµ Processing audio...</p>
    <p>Progress: {{progress}}%</p>
    <button (click)="pollStatus()">Refresh Progress</button>
  </div>
</div>

<style>
.upload-container {
  max-width: 600px;
  margin: 20px auto;
  padding: 20px;
  border: 2px dashed #007bff;
  border-radius: 8px;
  background-color: #f8f9fa;
}

.upload-section {
  text-align: center;
  margin-bottom: 20px;
}

.upload-label {
  display: block;
  font-weight: bold;
  margin-bottom: 10px;
  color: #333;
}

input[type="file"] {
  margin: 10px 0;
  padding: 10px;
  border: 1px solid #ddd;
  border-radius: 4px;
  background-color: white;
  width: 100%;
  max-width: 400px;
}

input[type="file"]:disabled {
  background-color: #e9ecef;
  opacity: 0.6;
}

.error-message {
  background-color: #f8d7da;
  color: #721c24;
  padding: 10px;
  border-radius: 4px;
  margin: 10px 0;
  border: 1px solid #f5c6cb;
}

.file-info {
  background-color: #d4edda;
  color: #155724;
  padding: 10px;
  border-radius: 4px;
  margin: 10px 0;
  border: 1px solid #c3e6cb;
}

.upload-status {
  background-color: #d1ecf1;
  color: #0c5460;
  padding: 10px;
  border-radius: 4px;
  margin: 10px 0;
  border: 1px solid #bee5eb;
}

.progress-section {
  background-color: #fff3cd;
  color: #856404;
  padding: 15px;
  border-radius: 4px;
  margin: 10px 0;
  border: 1px solid #ffeaa7;
}

.progress-section button {
  background-color: #007bff;
  color: white;
  border: none;
  padding: 8px 16px;
  border-radius: 4px;
  cursor: pointer;
  margin-top: 10px;
}

.progress-section button:hover {
  background-color: #0056b3;
}
</style>
